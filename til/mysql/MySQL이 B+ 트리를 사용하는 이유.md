# MySQL이 B+ 트리를 사용하는 이유?

정확하게는 **MySQL은 B+ 트리랑 직접적인 관련이 없다.** 관련이 있는 건 MySQL의 스토리지 엔진인 InnoDB이다.

그러면 질문을 올바르게 **InnoDB가 B+ 트리를 사용하는 이유?** 로 바꾸겠다.

## InnoDB가 B+ 트리를 사용하는 이유?

MySQL에 대해 조금만 아는 사람이라면 데이터와 보조 인덱스가 결국 B+ 트리를 사용하여 데이터를 저장할 것이라는 것을 알고 있을 것이다.

- 데이터는 <id, row>
- 보조 인덱스는 <index, id>

으로 저장된다.

또한 InnoDB가 B+ 트리를 사용하는 이유를 알기 전에 선택지가 B+ 트리 밖에 없다면 B+ 트리를 사용하는 이유에 대해 말할 가치가 없다,

질문을 더 명확하게 **InnoDB가 B 트리나 해시 대신 B+ 트리를 선택한 이유?** 로 바꾼다.

## InnoDB가 B 트리나 해시 대신 B+ 트리를 선택한 이유?

하나의 데이터만 액세스하는 모든 SQL문의 경우 시간 복잡도는 O(log n)인 B+ 트리이다.
하지만 해시의 경우 시간 복잡도는 0(1)으로 B+ 트리보다 성능이 좋다.

그럼 왜 해시를 사용하지 않은 걸까?

해싱은 정렬이나 범위 쿼리와 같은 일반적인 SQL 작업을 처리할 수 없다!!

그러면 B 트리 대신 B+ 트리를 선택한 이유는 무엇일까??

### 데이터 저장 위치

B 트리는 기본 적으로 모든 노드에 키와 데이터를 저장하고, 
B+ 트리는 리프 노드에 데이터를 저장하고, 내부 노드에는 키를 저장한다.

데이터 저장 위치를 생각해보면 B+ 트리는 B 트리보다 범위 쿼리에 효율적이다. 
또한 B+ 트리는 데이터를 리프 노드에만 저장하기 때문에 많은 키를 캐시할 수 있다.
